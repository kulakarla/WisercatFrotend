<body class="bg-light">
    <div class="container d-flex flex-column align-items-center">
        <div class="py-5 text-center">
            <h2>Log in</h2>
        </div>

        <div class="w-25">
            <div class="col-md-12 order-md-1">
                
                <form class="needs-validation"
                    *ngIf="!isLoggedIn"
                    name="form"
                    (ngSubmit)="f.form.valid && onSubmit()"
                    #f="ngForm"
                    novalidate>
                    <div class="mb-3">
                        <label for="name">Username</label>
                        <div class="input-group">
                            <input 
                                type="text" 
                                class="form-control" 
                                name="username"
                                [(ngModel)] = "form.username"
                                required
                                #username="ngModel"
                                [ngClass]="{'is-invalid': f.submitted && username.errors}"
                            />
                            <div
                                class="alert alert-danger"
                                role="alert"
                                *ngIf="username.errors && f.submitted" class="invalid-feedback">
                                Username is required!
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="code">Password</label>
                        <div class="input-group">
                            <input 
                            type="password" 
                            class="form-control" 
                            name="password"
                            [(ngModel)]="form.password"
                            required
                            minlength="5"
                            #password="ngModel"
                            [ngClass]="{'is-invalid': f.submitted && password.errors }"
                            />
                            <div
                                class="alert alert-danger"
                                role="alert"
                                *ngIf="password.errors && f.submitted" class="invalid-feedback">
                                <div *ngIf="password.errors['required']">Password is required</div>
                                <div *ngIf="password.errors['minlength']">
                                    Password must be atleast 5 characters
                                </div>
                            </div>
                        </div>
                    </div>
                

                    <button class="btn btn-primary btn-lg btn-block"
                            type="submit">
                        Login
                    </button>
                    
                    <div class="form group mt-2">
                        <div class="alert alert-danger"
                            role="alert"
                            *ngIf="f.submitted && isLoginFailed">
                            Login failed: {{ errorMessage }}
                        </div>
                    </div>
                </form>
                
            </div>
        </div>
    </div>
</body>